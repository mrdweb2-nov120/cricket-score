<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <title>Satsang Live Fixed</title>
    
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>

    <script>
        // आपका Config और Database URL
        const firebaseConfig = {
            apiKey: "AIzaSyBTbD8UfPZNrIUu6zIamoPeAPp_jnuxTpE",
            authDomain: "doner-speaker-list.firebaseapp.com",
            projectId: "doner-speaker-list",
            storageBucket: "doner-speaker-list.firebasestorage.app",
            messagingSenderId: "198403143772",
            appId: "1:198403143772:web:51cbcf39e3c608d9afce99",
            databaseURL: "https://doner-speaker-list-default-rtdb.firebaseio.com"
        };

        // Initialize Firebase
        if (!firebase.apps.length) {
            firebase.initializeApp(firebaseConfig);
        }
        const database = firebase.database();
        const dataRef = database.ref('liveData');

        // डेटा सुनना (Display)
        function listenData() {
            dataRef.on('value', (snapshot) => {
                const data = snapshot.val();
                if (data) {
                    document.getElementById('viewers').innerText = data.viewers || "0";
                    document.getElementById('speaker').innerText = data.speaker || "वक्ता का नाम";
                    document.getElementById('handle').innerText = data.handle || "@YourChannel";
                    document.getElementById('scroll-donors').innerHTML = (data.donors || "").replace(/\n/g, '<br> • ');
                }
            });
        }

        // डेटा भेजना (Admin)
        function saveToFirebase() {
            const v = document.getElementById('in-v').value;
            const s = document.getElementById('in-s').value;
            const h = document.getElementById('in-h').value;
            const d = document.getElementById('in-d').value;

            dataRef.set({
                viewers: v,
                speaker: s,
                handle: h,
                donors: d
            }).then(() => alert("डाटा अपडेट हो गया!"))
              .catch((e) => alert("Error: " + e.message));
        }

        window.onload = listenData;
    </script>

    <style>
        :root { --gold: #D4AF37; --red: #8B0000; }
        body { margin: 0; background: #000; color: white; font-family: sans-serif; overflow-x: hidden; }
        
        /* 16:9 Display */
        .screen { width: 1920px; height: 1080px; position: relative; background: #0a0a0a; }

        .social { position: absolute; top: 40px; left: 40px; background: var(--red); border: 2px solid var(--gold); padding: 10px 30px; border-radius: 50px; font-size: 26px; }
        .v-box { position: absolute; top: 140px; left: 40px; background: rgba(0,0,0,0.8); border: 2px solid var(--gold); padding: 15px; border-radius: 10px; text-align: center; }
        .v-num { font-size: 50px; color: var(--gold); font-weight: bold; }

        .donor-box { position: absolute; right: 50px; top: 50px; width: 380px; height: 550px; background: rgba(0,0,0,0.9); border: 2px solid var(--gold); border-radius: 15px; overflow: hidden; }
        .d-head { background: var(--gold); color: black; padding: 15px; text-align: center; font-weight: bold; font-size: 24px; }
        
        .marquee { height: 480px; overflow: hidden; position: relative; padding: 20px; font-size: 24px; line-height: 2.2; }
        #scroll-donors { position: absolute; width: 90%; animation: scrollUp 20s linear infinite; }
        @keyframes scrollUp { 0% { top: 100%; } 100% { top: -110%; } }

        .speaker-tag { position: absolute; bottom: 60px; right: 60px; background: linear-gradient(to right, var(--red), #400); padding: 20px 70px; border: 3px solid var(--gold); border-radius: 100px; font-size: 45px; font-weight: bold; }

        /* Admin Section */
        .admin { width: 1920px; background: #222; padding: 40px; display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; border-top: 10px solid var(--gold); }
        input, textarea { width: 100%; background: #111; border: 1px solid var(--gold); color: white; padding: 15px; }
        button { grid-column: span 4; background: var(--gold); padding: 20px; font-weight: bold; font-size: 22px; cursor: pointer; border: none; }
    </style>
</head>
<body>

    <div class="screen">
        <div class="social">यूट्यूब: <span id="handle">@...</span></div>
        <div class="v-box"><div style="font-size:14px">LIVE VIEWERS</div><div class="v-num" id="viewers">0</div></div>
        
        <div class="donor-box">
            <div class="d-head">सहयोग राशि</div>
            <div class="marquee"><div id="scroll-donors">डेटा लोड हो रहा है...</div></div>
        </div>

        <div class="speaker-tag">वक्ता: <span id="speaker" style="color:var(--gold)">...</span></div>
    </div>

    <div class="admin">
        <div><h3>Social Handle</h3><input id="in-h" type="text" value="@SatsangLive"></div>
        <div><h3>Viewers</h3><input id="in-v" type="number" value="1050"></div>
        <div><h3>Speaker</h3><input id="in-s" type="text" value="आचार्य जी"></div>
        <div><h3>Donors</h3><textarea id="in-d" rows="5">राम - ₹501&#10;श्याम - ₹1100</textarea></div>
        <button onclick="saveToFirebase()">UPDATE LIVE DATA</button>
    </div>

</body>
</html>
