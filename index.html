<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CHHOTU PRO BROADCAST | V.ULTIMATE</title>
    
    <!-- FONTS: Sports & Broadcast Style -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@500;600;700&family=Teko:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <style>
        /* =========================================
           1. CSS VARIABLES & THEME ENGINE
           ========================================= */
        :root {
            /* User Customizable Colors */
            --primary-color: #1e3c72; /* Default Blue */
            --secondary-color: #2a5298; /* Lighter Blue */
            --accent-color: #fec309; /* Gold/Yellow */
            --text-color: #ffffff;
            
            /* System Colors */
            --bg-dark: #0a0a0a;
            --panel-glass: rgba(20, 20, 20, 0.95);
            --danger: #ff2e63;
            --success: #00c853;
            
            /* Fonts */
            --font-num: 'Teko', sans-serif; /* For Scores */
            --font-ui: 'Rajdhani', sans-serif; /* For Names */
        }

        * { box-sizing: border-box; outline: none; user-select: none; }
        
        body {
            margin: 0;
            padding: 0;
            background-color: #00ff00; /* Green Screen for OBS/Vmix */
            font-family: var(--font-ui);
            overflow: hidden; /* Prevent scrollbars on broadcast view */
        }

        /* =========================================
           2. BROADCAST OVERLAY (LOWER THIRD)
           ========================================= */
        .broadcast-wrapper {
            position: absolute;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            width: 95%;
            max-width: 1400px;
            height: 110px;
            display: flex;
            filter: drop-shadow(0px 10px 15px rgba(0,0,0,0.8));
            z-index: 100;
        }

        /* --- SECTION 1: BATSMEN (LEFT) --- */
        .segment-left {
            flex: 1.2;
            background: linear-gradient(90deg, #111 0%, #222 100%);
            clip-path: polygon(0 0, 95% 0, 100% 50%, 95% 100%, 0 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding-left: 20px;
            padding-right: 40px;
            position: relative;
            border-left: 5px solid var(--accent-color);
        }

        .batsman-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 4px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        .batsman-row.striker { color: var(--accent-color); }
        .batsman-row.striker .bat-icon { opacity: 1; }
        .bat-icon { opacity: 0; font-size: 12px; margin-right: 5px; }
        
        .p-name { font-size: 22px; font-weight: 700; text-transform: uppercase; letter-spacing: 1px; }
        .p-stats { font-family: var(--font-num); font-size: 26px; color: #fff; }

        .target-pill {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            background: var(--accent-color);
            color: #000;
            padding: 2px 8px;
            font-size: 14px;
            font-weight: 800;
            border-radius: 4px;
            box-shadow: 0 0 10px rgba(254, 195, 9, 0.4);
            text-align: center;
            line-height: 1.1;
        }

        /* --- SECTION 2: MAIN SCORE (CENTER) --- */
        .segment-center {
            flex: 1.4;
            background: linear-gradient(180deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            clip-path: polygon(5% 0, 95% 0, 100% 50%, 95% 100%, 5% 100%, 0% 50%);
            margin: 0 -15px; /* Overlap effect */
            z-index: 2;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-between;
            padding: 5px 35px;
            border-top: 2px solid rgba(255,255,255,0.2);
            position: relative;
        }

        .match-header {
            font-size: 14px;
            font-weight: 700;
            letter-spacing: 2px;
            text-transform: uppercase;
            color: rgba(255,255,255,0.8);
            width: 100%;
            text-align: center;
            border-bottom: 1px solid rgba(255,255,255,0.2);
        }

        .main-score-box {
            display: flex;
            align-items: baseline;
            gap: 15px;
        }
        .score-big { font-family: var(--font-num); font-size: 60px; line-height: 55px; font-weight: 700; text-shadow: 2px 2px 0px rgba(0,0,0,0.5); }
        .score-overs { font-family: var(--font-num); font-size: 30px; color: var(--accent-color); }

        .bottom-stats {
            display: flex;
            justify-content: space-between;
            width: 100%;
            font-size: 14px;
            font-weight: 600;
            background: rgba(0,0,0,0.3);
            padding: 2px 10px;
            border-radius: 4px;
        }
        .equation-text { color: var(--accent-color); animation: flash 3s infinite; }

        /* --- SECTION 3: BOWLER/INFO (RIGHT) --- */
        .segment-right {
            flex: 1.2;
            background: linear-gradient(90deg, #222 0%, #111 100%);
            clip-path: polygon(5% 0, 100% 0, 100% 100%, 5% 100%, 0% 50%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding-left: 40px;
            padding-right: 20px;
            border-right: 5px solid var(--accent-color);
        }

        .tour-name {
            font-size: 12px;
            color: var(--accent-color);
            text-align: right;
            margin-bottom: 5px;
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        .bowler-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 5px;
        }
        .bowler-name { font-size: 20px; font-weight: 700; color: #fff; text-transform: uppercase; }
        .bowler-fig { font-family: var(--font-num); font-size: 22px; color: #aaa; }

        .ball-history {
            display: flex;
            justify-content: flex-end;
            gap: 6px;
        }
        .ball-dot {
            width: 22px;
            height: 22px;
            border-radius: 50%;
            background: #333;
            color: #fff;
            font-family: var(--font-num);
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid #555;
        }
        .ball-4 { background: var(--primary-color); border-color: #fff; font-weight: bold; }
        .ball-6 { background: var(--danger); border-color: #fff; font-weight: bold; }
        .ball-w { background: #fff; color: #000; font-weight: bold; }

        /* =========================================
           3. ANIMATIONS
           ========================================= */
        @keyframes flash { 0%, 100% { opacity: 1; } 50% { opacity: 0.7; } }
        
        .celebration-overlay {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-family: var(--font-num);
            font-size: 150px;
            font-weight: 900;
            color: var(--accent-color);
            text-shadow: 0 0 50px rgba(0,0,0,0.8);
            z-index: 200;
            opacity: 0;
            pointer-events: none;
            transition: 0.5s;
            text-transform: uppercase;
        }
        .celebration-active {
            animation: popIn 2s ease-out forwards;
        }
        @keyframes popIn {
            0% { transform: translate(-50%, -50%) scale(0); opacity: 0; }
            20% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; }
            40% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
            90% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(1.5); opacity: 0; }
        }

        /* =========================================
           4. ADMIN PANEL (HIDDEN BY DEFAULT)
           ========================================= */
        .admin-toggle {
            position: fixed; top: 10px; right: 10px; z-index: 1000;
            background: #fff; padding: 5px 10px; cursor: pointer; border-radius: 5px;
            font-weight: bold; font-family: sans-serif; opacity: 0.5;
        }
        
        .admin-panel {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100vh;
            background: #111;
            z-index: 999;
            overflow-y: auto;
            padding: 20px;
            display: none; /* Toggle this */
            color: #fff;
            grid-template-columns: 1fr 2fr 1fr;
            gap: 20px;
        }
        .admin-panel.active { display: grid; }

        .admin-box {
            background: #222;
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #333;
        }
        .admin-box h3 { color: var(--accent-color); margin-top: 0; border-bottom: 2px solid var(--accent-color); padding-bottom: 10px; }

        .input-group { margin-bottom: 15px; }
        .input-group label { display: block; font-size: 12px; color: #888; margin-bottom: 5px; }
        .input-group input { width: 100%; padding: 10px; background: #000; border: 1px solid #444; color: #fff; border-radius: 5px; }
        .input-group input[type="color"] { height: 40px; padding: 2px; }

        .score-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-top: 20px;
        }
        .btn-score {
            padding: 20px;
            font-size: 20px;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: 0.1s;
        }
        .btn-score:active { transform: scale(0.95); }
        .btn-0 { background: #444; color: #fff; }
        .btn-1 { background: #2563eb; color: #fff; }
        .btn-4 { background: var(--accent-color); color: #000; }
        .btn-6 { background: var(--danger); color: #fff; }
        .btn-w { background: #fff; color: #000; grid-column: span 2; }
        .btn-cmd { background: #333; color: #aaa; font-size: 14px; }
        .btn-update { background: var(--success); color: #fff; width: 100%; padding: 15px; font-weight: bold; margin-top: 20px; border: none; cursor: pointer; }

    </style>
</head>
<body>

    <!-- ANIMATION LAYER -->
    <div id="celebration" class="celebration-overlay">FOUR!</div>

    <!-- TOGGLE ADMIN BUTTON -->
    <div class="admin-toggle" onclick="toggleAdmin()">‚öôÔ∏è ADMIN PANEL</div>

    <!-- MAIN BROADCAST OVERLAY -->
    <div class="broadcast-wrapper">
        
        <!-- LEFT: BATSMEN -->
        <div class="segment-left">
            <div class="batsman-row" id="row-bat1">
                <span class="p-name"><i class="fas fa-baseball-bat-ball bat-icon"></i> <span id="disp-bat1">KOHLI</span></span>
                <span class="p-stats" id="disp-score1">45(28)</span>
            </div>
            <div class="batsman-row" id="row-bat2">
                <span class="p-name"><i class="fas fa-baseball-bat-ball bat-icon"></i> <span id="disp-bat2">ROHIT</span></span>
                <span class="p-stats" id="disp-score2">12(8)</span>
            </div>
            <!-- Target Pill in Center/Right of left segment -->
            <div class="target-pill">
                <div style="font-size: 10px; opacity:0.8;">TARGET</div>
                <div id="disp-target-sm">245</div>
            </div>
        </div>

        <!-- CENTER: SCORE & STATUS -->
        <div class="segment-center">
            <div class="match-header" id="disp-match-title">IND VS AUS - FINAL</div>
            
            <div class="main-score-box">
                <div class="score-big">
                    <span id="disp-runs">142</span>/<span id="disp-wkts">2</span>
                </div>
                <div class="score-overs" id="disp-overs">14.2</div>
            </div>

            <div class="bottom-stats">
                <span>CRR: <span id="disp-crr" style="color:#fff;">8.45</span></span>
                <span class="equation-text" id="disp-equation">NEED 103 OFF 34</span>
                <span>PSHIP: <span id="disp-partnership" style="color:#fff;">52(30)</span></span>
            </div>
        </div>

        <!-- RIGHT: BOWLER & HISTORY -->
        <div class="segment-right">
            <div class="tour-name" id="disp-tour-name">CHHOTU PREMIER LEAGUE</div>
            
            <div class="bowler-info">
                <span class="bowler-name" id="disp-bowler">STARC</span>
                <span class="bowler-fig" id="disp-bowler-fig">1/24</span>
            </div>
            
            <div class="ball-history" id="ball-container">
                <!-- Dots injected via JS -->
                <div class="ball-dot">1</div>
                <div class="ball-dot ball-4">4</div>
                <div class="ball-dot">0</div>
                <div class="ball-dot ball-6">6</div>
                <div class="ball-dot ball-w">W</div>
            </div>
        </div>
    </div>

    <!-- ADMIN PANEL -->
    <div class="admin-panel" id="adminPanel">
        
        <!-- COL 1: SETTINGS -->
        <div class="admin-box">
            <h3>üé® THEME & MATCH INFO</h3>
            <div class="input-group">
                <label>Primary Team Color</label>
                <input type="color" id="set-color-pri" value="#1e3c72" onchange="updateTheme()">
            </div>
            <div class="input-group">
                <label>Secondary Color</label>
                <input type="color" id="set-color-sec" value="#2a5298" onchange="updateTheme()">
            </div>
            <div class="input-group">
                <label>Tournament Name</label>
                <input type="text" id="set-tour" value="ICC WORLD CUP" oninput="manualUpdate()">
            </div>
            <div class="input-group">
                <label>Match Header (Team Vs Team)</label>
                <input type="text" id="set-match" value="IND VS PAK" oninput="manualUpdate()">
            </div>
            <div class="input-group">
                <label>Target Score</label>
                <input type="number" id="set-target" value="0" oninput="manualUpdate()">
            </div>
        </div>

        <!-- COL 2: SCORING ENGINE -->
        <div class="admin-box">
            <h3>üèè SCORING ENGINE</h3>
            
            <div class="score-grid">
                <button class="btn-score btn-0" onclick="addScore(0)">0</button>
                <button class="btn-score btn-1" onclick="addScore(1)">1</button>
                <button class="btn-score btn-1" onclick="addScore(2)">2</button>
                <button class="btn-score btn-1" onclick="addScore(3)">3</button>
                
                <button class="btn-score btn-4" onclick="addScore(4)">4</button>
                <button class="btn-score btn-6" onclick="addScore(6)">6</button>
                <button class="btn-score btn-w" onclick="addWicket()">WICKET</button>
                
                <button class="btn-score btn-cmd" onclick="addExtra('wd')">WIDE</button>
                <button class="btn-score btn-cmd" onclick="addExtra('nb')">NO BALL</button>
                <button class="btn-score btn-cmd" onclick="undoLast()">UNDO</button>
                <button class="btn-score btn-cmd" style="background:var(--accent-color); color:#000;" onclick="swapStrike()">SWAP</button>
            </div>

            <div style="margin-top: 20px; display:flex; gap:10px;">
                <div class="input-group" style="flex:1;">
                    <label>Total Runs</label>
                    <input type="number" id="set-runs" readonly>
                </div>
                <div class="input-group" style="flex:1;">
                    <label>Wickets</label>
                    <input type="number" id="set-wkts" readonly>
                </div>
                <div class="input-group" style="flex:1;">
                    <label>Overs</label>
                    <input type="text" id="set-overs" readonly>
                </div>
            </div>
        </div>

        <!-- COL 3: PLAYERS -->
        <div class="admin-box">
            <h3>üë• PLAYERS</h3>
            
            <div class="input-group" style="border-left: 3px solid var(--accent-color); padding-left:10px;">
                <label>Striker Name</label>
                <input type="text" id="set-bat1" value="BATSMAN 1" oninput="manualUpdate()">
                <div style="display:flex; gap:5px; margin-top:5px;">
                    <input type="number" id="set-bat1-r" placeholder="R" style="width:50px" oninput="manualUpdate()">
                    <input type="number" id="set-bat1-b" placeholder="B" style="width:50px" oninput="manualUpdate()">
                </div>
            </div>

            <div class="input-group" style="margin-top:15px; padding-left:10px;">
                <label>Non-Striker Name</label>
                <input type="text" id="set-bat2" value="BATSMAN 2" oninput="manualUpdate()">
                <div style="display:flex; gap:5px; margin-top:5px;">
                    <input type="number" id="set-bat2-r" placeholder="R" style="width:50px" oninput="manualUpdate()">
                    <input type="number" id="set-bat2-b" placeholder="B" style="width:50px" oninput="manualUpdate()">
                </div>
            </div>

            <div class="input-group" style="margin-top:20px; border-top:1px solid #444; padding-top:10px;">
                <label>Current Bowler</label>
                <input type="text" id="set-bowl" value="BOWLER" oninput="manualUpdate()">
                <div style="display:flex; gap:5px; margin-top:5px;">
                    <input type="number" id="set-bowl-w" placeholder="W" style="width:50px" oninput="manualUpdate()">
                    <input type="number" id="set-bowl-r" placeholder="R" style="width:50px" oninput="manualUpdate()">
                </div>
            </div>
            
            <button class="btn-update" onclick="toggleAdmin()">CLOSE PANEL</button>
        </div>

    </div>

    <script>
        /* =========================================
           JAVASCRIPT ENGINE (LOGIC)
           ========================================= */
        
        // State Object
        let match = {
            runs: 0,
            wickets: 0,
            overs: 0,
            balls: 0,
            target: 0,
            history: [], // For Undo
            overHistory: [], // ['1', '4', 'W']
            strikerId: 1, // 1 or 2
            partnership: { r: 0, b: 0 },
            bat1: { name: "KHOLI", runs: 12, balls: 18 },
            bat2: { name: "ROHIT", runs: 14, balls: 19 },
            bowler: { name: "AMIR", runs: 32, wkts: 1 }
        };

        // DOM Loading
        window.onload = () => {
            loadFromStorage();
            updateUI();
            updateTheme(); // Init colors
        };

        function toggleAdmin() {
            const p = document.getElementById('adminPanel');
            p.classList.toggle('active');
        }

        function updateTheme() {
            const pri = document.getElementById('set-color-pri').value;
            const sec = document.getElementById('set-color-sec').value;
            
            document.documentElement.style.setProperty('--primary-color', pri);
            document.documentElement.style.setProperty('--secondary-color', sec);
        }

        // --- SCORING LOGIC ---

        function saveState() {
            // Deep copy for undo history
            if (match.history.length > 10) match.history.shift();
            match.history.push(JSON.parse(JSON.stringify(match)));
            localStorage.setItem('cricketScoreV2', JSON.stringify(match));
        }

        function undoLast() {
            if (match.history.length > 0) {
                match = match.history.pop();
                updateUI();
                fillInputs();
            }
        }

        function addScore(runs) {
            saveState();
            
            // Trigger Animation
            if(runs === 4) showCelebration("FOUR!");
            if(runs === 6) showCelebration("SIX!");

            // Update Main Score
            match.runs += runs;
            match.balls++;
            match.partnership.r += runs;
            match.partnership.b++;

            // Update Batsman
            if (match.strikerId === 1) {
                match.bat1.runs += runs;
                match.bat1.balls++;
            } else {
                match.bat2.runs += runs;
                match.bat2.balls++;
            }

            // Update Bowler
            match.bowler.runs += runs;

            // Update Over History
            match.overHistory.push(runs);
            if (match.overHistory.length > 6) match.overHistory.shift();

            // Over Completion Logic
            if (match.balls >= 6) {
                match.overs++;
                match.balls = 0;
                match.overHistory = []; // Clear dots or keep them? Usually cleared or shifted
                swapStrike(); // End of over swap
            } else {
                // Strike rotation
                if (runs % 2 !== 0) swapStrike();
            }

            updateUI();
            fillInputs();
        }

        function addWicket() {
            saveState();
            showCelebration("WICKET!");
            
            match.wickets++;
            match.balls++;
            match.bowler.wkts++;
            match.partnership = {r:0, b:0}; // Reset partnership
            match.overHistory.push("W");

            // Determine who got out (simplified: current striker is replaced)
            if (match.strikerId === 1) {
                match.bat1.balls++;
                match.bat1.runs = 0; // Reset for new batsman (or keep stats? Simplified reset here)
                match.bat1.name = "NEW BATSMAN";
            } else {
                match.bat2.balls++;
                match.bat2.runs = 0;
                match.bat2.name = "NEW BATSMAN";
            }

            if (match.balls >= 6) {
                match.overs++;
                match.balls = 0;
                match.overHistory = [];
                swapStrike();
            }

            updateUI();
            fillInputs();
        }

        function addExtra(type) {
            saveState();
            match.runs++; // 1 run for wide/nb
            match.bowler.runs++;
            // Balls don't count for WD/NB usually, but depends on format. Keeping simple.
            updateUI();
            fillInputs();
        }

        function swapStrike() {
            match.strikerId = match.strikerId === 1 ? 2 : 1;
            updateUI();
        }

        // --- UI UPDATER ---

        function updateUI() {
            // Text Elements
            document.getElementById('disp-runs').innerText = match.runs;
            document.getElementById('disp-wkts').innerText = match.wickets;
            document.getElementById('disp-overs').innerText = `${match.overs}.${match.balls}`;
            
            document.getElementById('disp-bat1').innerText = match.bat1.name;
            document.getElementById('disp-score1').innerText = `${match.bat1.runs}(${match.bat1.balls})`;
            
            document.getElementById('disp-bat2').innerText = match.bat2.name;
            document.getElementById('disp-score2').innerText = `${match.bat2.runs}(${match.bat2.balls})`;
            
            document.getElementById('disp-bowler').innerText = match.bowler.name;
            document.getElementById('disp-bowler-fig').innerText = `${match.bowler.wkts}/${match.bowler.runs}`;

            document.getElementById('disp-partnership').innerText = `${match.partnership.r}(${match.partnership.b})`;

            // Active Striker Indicator
            const r1 = document.getElementById('row-bat1');
            const r2 = document.getElementById('row-bat2');
            if(match.strikerId === 1) {
                r1.classList.add('striker'); r2.classList.remove('striker');
            } else {
                r2.classList.add('striker'); r1.classList.remove('striker');
            }

            // Calculations
            let totalBalls = (match.overs * 6) + match.balls;
            let crr = totalBalls > 0 ? (match.runs / totalBalls) * 6 : 0;
            document.getElementById('disp-crr').innerText = crr.toFixed(2);

            // Target & Equation
            document.getElementById('disp-target-sm').innerText = match.target;
            if(match.target > 0) {
                let runsNeeded = match.target - match.runs;
                let ballsRem = 120 - totalBalls; // Assuming T20
                if(runsNeeded <= 0) document.getElementById('disp-equation').innerText = "TARGET CHASED!";
                else if(ballsRem <= 0) document.getElementById('disp-equation').innerText = "MATCH OVER";
                else document.getElementById('disp-equation').innerText = `NEED ${runsNeeded} RUNS IN ${ballsRem} BALLS`;
            } else {
                document.getElementById('disp-equation').innerText = "1ST INNINGS";
            }

            // Render Over History
            const histCont = document.getElementById('ball-container');
            histCont.innerHTML = '';
            match.overHistory.forEach(ball => {
                let div = document.createElement('div');
                div.className = 'ball-dot';
                div.innerText = ball;
                if(ball == 4) div.classList.add('ball-4');
                if(ball == 6) div.classList.add('ball-6');
                if(ball == 'W') div.classList.add('ball-w');
                histCont.appendChild(div);
            });
        }

        // --- MANUAL DATA ENTRY SYNC ---
        
        function manualUpdate() {
            // Reads inputs from Admin Panel and updates State
            match.meta = {};
            match.meta.tour = document.getElementById('set-tour').value;
            match.meta.match = document.getElementById('set-match').value;
            match.target = parseInt(document.getElementById('set-target').value) || 0;
            
            match.bat1.name = document.getElementById('set-bat1').value;
            match.bat1.runs = parseInt(document.getElementById('set-bat1-r').value) || 0;
            match.bat1.balls = parseInt(document.getElementById('set-bat1-b').value) || 0;
            
            match.bat2.name = document.getElementById('set-bat2').value;
            match.bat2.runs = parseInt(document.getElementById('set-bat2-r').value) || 0;
            match.bat2.balls = parseInt(document.getElementById('set-bat2-b').value) || 0;

            match.bowler.name = document.getElementById('set-bowl').value;
            match.bowler.wkts = parseInt(document.getElementById('set-bowl-w').value) || 0;
            match.bowler.runs = parseInt(document.getElementById('set-bowl-r').value) || 0;

            // Update Labels directly
            document.getElementById('disp-tour-name').innerText = match.meta.tour;
            document.getElementById('disp-match-title').innerText = match.meta.match;

            updateUI();
        }

        function fillInputs() {
            // Updates Admin Panel inputs based on State (Reverse Sync)
            document.getElementById('set-runs').value = match.runs;
            document.getElementById('set-wkts').value = match.wickets;
            document.getElementById('set-overs').value = `${match.overs}.${match.balls}`;
            
            document.getElementById('set-bat1-r').value = match.bat1.runs;
            document.getElementById('set-bat1-b').value = match.bat1.balls;
            document.getElementById('set-bat2-r').value = match.bat2.runs;
            document.getElementById('set-bat2-b').value = match.bat2.balls;
            
            document.getElementById('set-bowl-r').value = match.bowler.runs;
            document.getElementById('set-bowl-w').value = match.bowler.wkts;
        }

        function showCelebration(text) {
            const el = document.getElementById('celebration');
            el.innerText = text;
            el.classList.remove('celebration-active');
            void el.offsetWidth; // Trigger reflow
            el.classList.add('celebration-active');
        }

        function loadFromStorage() {
            const saved = localStorage.getItem('cricketScoreV2');
            if(saved) {
                match = JSON.parse(saved);
                fillInputs();
                // Set initial inputs for strings
                document.getElementById('set-bat1').value = match.bat1.name;
                document.getElementById('set-bat2').value = match.bat2.name;
                document.getElementById('set-bowl').value = match.bowler.name;
            }
        }

    </script>
</body>
</html>
