<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chhotu Scorer Pro - Elite Edition</title>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.17.1/firebase-database-compat.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Roboto:wght@400;700;900&display=swap');
        
        :root { 
            --primary: #fec309; 
            --dark-bg: #030a16; 
            --glass: rgba(255, 255, 255, 0.05);
            --neon-red: #ff0040;
            --neon-blue: #00e1ff;
        }

        body { 
            background: var(--dark-bg); 
            font-family: 'Roboto', sans-serif; 
            color: white; 
            margin: 0; 
            padding-bottom: 90px; 
            overflow-x: hidden; 
        }

        /* --- GLOW ANIMATIONS --- */
        .glow-text { text-shadow: 0 0 10px rgba(254, 195, 9, 0.5); }
        .live-dot { height: 8px; width: 8px; background-color: #00ff00; border-radius: 50%; display: inline-block; margin-right: 5px; animation: blink 1s infinite; }
        @keyframes blink { 0% { opacity: 1; } 50% { opacity: 0.3; } 100% { opacity: 1; } }

        /* --- TOP UI --- */
        .live-eq-bar { background: linear-gradient(90deg, #ff0040, #900028); color: white; font-size: 13px; padding: 6px; text-align: center; font-weight: 900; letter-spacing: 1px; border-bottom: 2px solid var(--primary); }
        
        .top-vs-bar { background: #000; padding: 10px 20px; display: flex; align-items: center; justify-content: space-between; font-family: 'Orbitron', sans-serif; font-size: 14px; font-weight: 700; }
        .win-progress-bg { width: 100%; height: 6px; background: #222; border-radius: 10px; display: flex; overflow: hidden; box-shadow: inset 0 0 5px #000; }
        #win-p1 { width: 50%; background: var(--neon-blue); box-shadow: 0 0 10px var(--neon-blue); transition: 1s; }
        #win-p2 { width: 50%; background: var(--neon-red); box-shadow: 0 0 10px var(--neon-red); transition: 1s; }

        /* --- MAIN SCOREBOARD --- */
        .scoreboard-wrapper { position: relative; margin: 10px; border-radius: 15px; overflow: hidden; border: 1px solid rgba(255,255,255,0.1); }
        .scoreboard { width: 100%; height: 110px; background: linear-gradient(135deg, #00122e 0%, #002b6b 100%); display: flex; align-items: center; position: relative; }
        
        .team-box { width: 130px; background: var(--primary); color: #000; height: 100%; display: flex; align-items: center; justify-content: center; font-size: 28px; font-weight: 900; font-family: 'Orbitron', sans-serif; text-align: center; clip-path: polygon(0 0, 85% 0, 100% 100%, 0% 100%); }
        
        .score-main { font-size: 58px; font-weight: 900; padding: 0 15px; font-family: 'Orbitron', sans-serif; letter-spacing: -3px; color: #fff; }
        .ov-small { font-size: 20px; opacity: 0.7; font-weight: 400; margin-left: 5px; color: var(--primary); font-family: 'Roboto'; }
        
        .batsman-box { flex-grow: 1; padding-left: 15px; border-left: 1px solid rgba(255,255,255,0.1); height: 70%; display: flex; flex-direction: column; justify-content: center; }
        .batsman-row { font-size: 17px; margin: 2px 0; color: rgba(255,255,255,0.6); }
        .striker { color: var(--primary) !important; font-weight: 700; text-shadow: 0 0 15px rgba(254, 195, 9, 0.4); }
        .b-stats { font-size: 14px; color: #fff; font-weight: 400; margin-left: 8px; opacity: 0.8; }

        .opp-container { width: 260px; height: 100%; display: flex; font-family: 'Orbitron'; }
        .opp-box { background: rgba(217, 83, 79, 0.2); width: 60%; display: flex; flex-direction: column; align-items: center; justify-content: center; border-left: 1px solid rgba(255,255,255,0.1); }
        .target-box { background: rgba(254, 195, 9, 0.1); width: 40%; display: flex; flex-direction: column; align-items: center; justify-content: center; color: var(--primary); border-left: 1px solid rgba(255,255,255,0.1); }

        /* --- BOUNDARY ANIMATION --- */
        #boundary-anim { position: absolute; top: 0; left: 0; width: 100%; height: 100%; display: none; align-items: center; justify-content: center; font-size: 80px; font-weight: 900; z-index: 100; background: var(--primary); color: #000; font-family: 'Orbitron'; animation: zoomIn 0.3s; }
        @keyframes zoomIn { from { transform: scale(0.5); opacity: 0; } to { transform: scale(1); opacity: 1; } }

        /* --- STRIPS --- */
        .bottom-strip { background: rgba(0,0,0,0.8); padding: 10px 15px; display: flex; align-items: center; justify-content: space-between; backdrop-filter: blur(10px); }
        .tour-info { display: flex; align-items: center; gap: 12px; }
        #d-tour { font-size: 16px; font-weight: 900; color: var(--primary); }
        .inn-tag { background: #00ff00; color: #000; padding: 2px 10px; border-radius: 20px; font-size: 10px; font-weight: 900; text-transform: uppercase; }

        .dot { width: 24px; height: 24px; border-radius: 6px; background: #1a1a1a; border: 1px solid #333; display: flex; align-items: center; justify-content: center; font-size: 11px; font-weight: 900; transition: 0.3s; }
        .dot.active { background: var(--primary); color: #000; border-color: #fff; transform: scale(1.1); box-shadow: 0 0 10px var(--primary); }

        /* --- ADMIN & PAGES --- */
        .page { display: none; padding: 20px; animation: fadeIn 0.4s; }
        .page.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .admin-card { background: #0e1624; padding: 20px; border-radius: 15px; border: 1px solid rgba(255,255,255,0.05); margin-bottom: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .btn-row { display: flex; gap: 10px; margin-bottom: 15px; }
        button { padding: 14px; font-weight: 700; border: none; border-radius: 10px; cursor: pointer; flex: 1; font-size: 12px; text-transform: uppercase; transition: 0.2s; }
        button:active { transform: scale(0.95); }
        .btn-blue { background: #0055ff; color: white; box-shadow: 0 4px 15px rgba(0,85,255,0.3); }
        .btn-yel { background: var(--primary); color: #000; box-shadow: 0 4px 15px rgba(254,195,9,0.3); }
        .btn-red { background: var(--neon-red); color: white; }
        .btn-green { background: #00c853; color: white; }
        
        input { width: 93%; padding: 14px; margin-bottom: 12px; background: #050b14; border: 1px solid #1a2436; color: #fff; border-radius: 10px; font-size: 14px; }
        label { display: block; font-size: 11px; color: var(--primary); margin-bottom: 6px; font-weight: 700; letter-spacing: 1px; }

        /* --- NAV --- */
        .bottom-nav { position: fixed; bottom: 0; width: 100%; height: 80px; background: rgba(3, 10, 22, 0.95); display: flex; justify-content: space-around; align-items: center; border-top: 2px solid var(--primary); backdrop-filter: blur(15px); z-index: 1000; }
        .nav-item { color: #fff; font-size: 12px; opacity: 0.4; text-align: center; font-weight: 700; flex: 1; cursor: pointer; transition: 0.3s; }
        .nav-item.active { opacity: 1; color: var(--primary); transform: translateY(-5px); }
        .nav-icon { font-size: 24px; display: block; margin-bottom: 4px; }

        .sub-tab-btn { background: #1a2436; color: #888; margin-bottom: 10px; border: 1px solid transparent; }
        .sub-tab-btn.active { background: rgba(254,195,9,0.1); color: var(--primary); border: 1px solid var(--primary); }
    </style>
</head>
<body onload="startClock();">

    <div class="live-eq-bar" id="d-equation">CONNECTING TO SERVER...</div>

    <div class="top-vs-bar">
        <span id="txt-t1">TEAM A</span>
        <div style="flex-grow: 1; margin: 0 20px;">
            <div class="win-progress-bg">
                <div id="win-p1"></div>
                <div id="win-p2"></div>
            </div>
        </div>
        <span id="txt-t2">TEAM B</span>
    </div>

    <div class="scoreboard-wrapper">
        <div id="boundary-anim">FOUR!</div>
        <div class="scoreboard">
            <div class="team-box" id="d-team">T1</div>
            <div class="score-main">
                <span id="d-runs">0</span>-<span id="d-wkt">0</span><span class="ov-small">(<span id="d-ov">0.0</span>)</span>
            </div>
            
            <div class="batsman-box">
                <div id="row-b1" class="batsman-row"><span id="d-b1-s"></span> <span id="d-b1">BATSMAN 1</span> <span class="b-stats" id="d-b1-r">0(0)</span></div>
                <div id="row-b2" class="batsman-row"><span id="d-b2-s"></span> <span id="d-b2">BATSMAN 2</span> <span class="b-stats" id="d-b2-r">0(0)</span></div>
            </div>

            <div class="opp-container">
                <div class="opp-box">
                    <span style="font-size: 9px; font-weight: 900; opacity: 0.6;">OPPONENT</span>
                    <span style="font-size: 18px; font-weight: 900; color: #fff;" id="d-opp-score">0-0 (0.0)</span>
                </div>
                <div class="target-box">
                    <span style="font-size: 9px; font-weight: 900; opacity: 0.6;">TARGET</span>
                    <span style="font-size: 22px; font-weight: 900;" id="d-target">0</span>
                </div>
            </div>
        </div>

        <div class="bottom-strip">
            <div class="tour-info">
                <span id="d-tour">PRO TOURNAMENT</span>
                <span class="inn-tag" id="d-inn-status">1ST INNINGS</span>
                <span style="font-size: 12px; font-weight: 700;">CRR: <span id="d-crr" style="color:var(--primary)">0.00</span></span>
            </div>
            <div style="display: flex; align-items: center; gap: 15px;">
                <span style="font-size: 13px; font-weight: 700; color: #fff;"><span class="live-dot"></span> <span id="d-bowl">BOWLER</span></span>
                <div class="over-dots">
                    <div class="dot">1</div><div class="dot">2</div><div class="dot">3</div><div class="dot">4</div><div class="dot">5</div><div class="dot">6</div>
                </div>
            </div>
        </div>
    </div>

    <div id="page-live" class="page active">
        <div class="admin-card" style="text-align: center;">
            <h2 style="color:var(--primary); margin-top:0;">LIVE DASHBOARD</h2>
            <div style="display: flex; justify-content: space-around; background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px;">
                <div><small style="display:block; opacity:0.5;">DATE</small><span id="live-time-date">--</span></div>
                <div><small style="display:block; opacity:0.5;">TIME</small><span id="live-clock">--</span></div>
            </div>
        </div>
    </div>

    <div id="page-admin" class="page">
        <div id="login-area" style="text-align: center; padding-top: 50px;">
            <div style="font-size: 50px; margin-bottom: 20px;">üõ°Ô∏è</div>
            <h3 style="letter-spacing: 2px;">ADMIN AUTHENTICATION</h3>
            <input type="password" id="pass-input" placeholder="Enter Secure Pin" style="text-align:center; font-size: 20px;">
            <button onclick="checkPass()" class="btn-yel" style="width:100%; padding: 18px;">UNLOCK CONTROLS</button>
        </div>

        <div id="admin-panel" style="display:none;">
            <div style="display: flex; gap: 8px; margin-bottom: 20px;">
                <button class="sub-tab-btn active" id="tab-score" onclick="showSubPage('score')">üéÆ SCORE</button>
                <button class="sub-tab-btn" id="tab-squad" onclick="showSubPage('squad')">üë• SQUAD</button>
                <button class="sub-tab-btn" id="tab-hist" onclick="showSubPage('hist')">üìú HISTORY</button>
            </div>

            <div id="sub-score" class="sub-page active">
                <div class="admin-card">
                    <label>QUICK RUNS</label>
                    <div class="btn-row">
                        <button class="btn-blue" onclick="addRun(1)">+1</button>
                        <button class="btn-blue" onclick="addRun(2)">+2</button>
                        <button class="btn-blue" onclick="addRun(3)">+3</button>
                        <button class="btn-red" onclick="addRun(-1)">-1</button>
                    </div>
                    <div class="btn-row">
                        <button class="btn-yel" onclick="triggerAnim('FOUR', 4)">FOUR</button>
                        <button class="btn-yel" onclick="triggerAnim('SIX', 6)">SIX</button>
                        <button class="btn-red" onclick="handleWicket()" style="background:#ff3d00;">WICKET</button>
                        <button class="btn-green" onclick="nextBall('n')">NEXT BALL</button>
                    </div>
                    <button class="btn-yel" style="width:100%; background:linear-gradient(90deg, #e67e22, #d35400); color:white;" onclick="changeStrike()">üîÑ SWAP STRIKE</button>
                </div>

                <div class="admin-card">
                    <label>MATCH CONFIGURATION</label>
                    <input type="text" id="i-b1" placeholder="Batsman 1 Name" oninput="saveData()">
                    <input type="text" id="i-b2" placeholder="Batsman 2 Name" oninput="saveData()">
                    <input type="text" id="i-bowl" placeholder="Current Bowler" oninput="saveData()">
                    <input type="text" id="i-team" placeholder="Batting Team" oninput="saveData()">
                    <input type="text" id="i-opp-name" placeholder="Opponent Team" oninput="saveData()">
                    <input type="number" id="i-target" placeholder="Set Target" oninput="saveData()">
                    <button class="btn-blue" onclick="toggleInnings()" style="width:100%; margin-top:5px; background: #00122e; border:1px solid var(--primary);">üåó TOGGLE INNINGS</button>
                </div>
                
                <div class="admin-card" style="background: rgba(255,0,0,0.05); border: 1px solid rgba(255,0,0,0.2);">
                    <button class="btn-red" onclick="resetDB()" style="width:100%;">‚ö†Ô∏è RESET LIVE DATA</button>
                    <button class="btn-red" onclick="logoutAdmin()" style="width:100%; margin-top:10px; background:#333;">üîí LOCK ADMIN PANEL</button>
                </div>
            </div>

            <div id="sub-squad" class="sub-page">
                <div class="admin-card">
                    <label>ADD TO PLAYING XI</label>
                    <input type="text" id="squad-input" placeholder="Player Name">
                    <button class="btn-green" onclick="addToSquad()" style="width:100%;">ADD TO LIST</button>
                    <div id="player-list-display" style="margin-top:20px; border-top:1px solid #222; padding-top:10px;"></div>
                </div>
            </div>

            <div id="sub-hist" class="sub-page">
                <div class="admin-card">
                    <button class="btn-green" onclick="finishAndArchive()" style="width:100%; padding:18px;">üíæ ARCHIVE THIS MATCH</button>
                </div>
                <div id="year-buttons-container" style="display:flex; gap:10px; overflow-x:auto; padding-bottom:10px;"></div>
                <div id="hist-matches-list"></div>
            </div>
        </div>
    </div>

    <nav class="bottom-nav">
        <div class="nav-item active" onclick="showPage('live', this)">
            <span class="nav-icon">üèè</span>LIVE
        </div>
        <div class="nav-item" onclick="showPage('admin', this)">
            <span class="nav-icon">‚öôÔ∏è</span>ADMIN
        </div>
    </nav>

    <script>
        const myPass = "ChhotuLive8718";
        const firebaseConfig = { databaseURL: "Https://myscoreboard-b140f-default-rtdb.firebaseio.com/" };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database().ref("pro_v20_master");
        const archRef = firebase.database().ref("history_archives");

        let st = { 
            r:0, w:0, o:0, b:0, t1:"TEAM A", t2:"TEAM B", tour:"TOURNAMENT", 
            oppS:"0-0 (0.0)", target:0, strike:1, bowl:"BOWLER", 
            p1:{name:"BATSMAN 1", r:0, b:0}, p2:{name:"BATSMAN 2", r:0, b:0}, 
            anim:"", inn: "1ST INNINGS", squad: []
        };

        function startClock() {
            setInterval(() => {
                const now = new Date();
                document.getElementById('live-clock').innerText = now.toLocaleTimeString();
                document.getElementById('live-time-date').innerText = now.toLocaleDateString('hi-IN', {day:'2-digit', month:'short', year:'numeric'}).toUpperCase();
            }, 1000);
            setupHistoryYears();
        }

        function showPage(p, el) {
            document.querySelectorAll('.page').forEach(pg => pg.classList.remove('active'));
            document.getElementById('page-'+p).classList.add('active');
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            el.classList.add('active');
        }

        function showSubPage(p) {
            document.querySelectorAll('.sub-page').forEach(sp => sp.classList.remove('active'));
            document.getElementById('sub-'+p).classList.add('active');
            document.querySelectorAll('.sub-tab-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById('tab-'+p).classList.add('active');
        }

        function checkPass() {
            if(document.getElementById('pass-input').value === myPass) {
                document.getElementById('admin-panel').style.display = 'block';
                document.getElementById('login-area').style.display = 'none';
            } else alert("‡§ó‡§≤‡§§ ‡§™‡§ø‡§®! ‡§´‡§ø‡§∞ ‡§∏‡•á ‡§ï‡•ã‡§∂‡§ø‡§∂ ‡§ï‡§∞‡•á‡§Ç‡•§");
        }

        function logoutAdmin() {
            document.getElementById('admin-panel').style.display = 'none';
            document.getElementById('login-area').style.display = 'block';
            document.getElementById('pass-input').value = "";
            alert("Admin Locked Successfully!");
        }

        function toggleInnings() {
            st.inn = (st.inn === "1ST INNINGS") ? "2ND INNINGS" : "1ST INNINGS";
            saveData();
        }

        function addRun(v) {
            st.r += v;
            if(st.strike === 1) st.p1.r += v; else st.p2.r += v;
            saveData();
        }

        function nextBall(type) {
            if(type === 'w') st.w++;
            if(st.strike === 1) st.p1.b++; else st.p2.b++;
            st.b++; if(st.b >= 6) { st.o++; st.b = 0; }
            saveData();
        }

        function handleWicket() {
            let n = prompt("‡§®‡§è ‡§¨‡§≤‡•ç‡§≤‡•á‡§¨‡§æ‡§ú ‡§ï‡§æ ‡§®‡§æ‡§Æ ‡§≤‡§ø‡§ñ‡•á‡§Ç:");
            if(n) {
                if(st.strike === 1) st.p1 = {name: n, r:0, b:0};
                else st.p2 = {name: n, r:0, b:0};
                nextBall('w');
            }
        }

        function changeStrike() { st.strike = st.strike === 1 ? 2 : 1; saveData(); }

        function triggerAnim(txt, runs) {
            st.anim = txt; db.set(st); addRun(runs);
            setTimeout(() => { st.anim = ""; db.set(st); }, 2500);
        }

        function addToSquad() {
            let name = document.getElementById('squad-input').value;
            if(name) {
                if(!st.squad) st.squad = [];
                st.squad.push(name);
                document.getElementById('squad-input').value = "";
                saveData();
            }
        }

        function saveData() {
            if(document.getElementById('i-b1')) {
                st.p1.name = document.getElementById('i-b1').value || st.p1.name;
                st.p2.name = document.getElementById('i-b2').val
